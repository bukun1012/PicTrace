{% load static %}
<!-- å´é‚Š Navbar -->
<aside class="flex flex-col justify-between w-full h-screen p-6 text-white bg-purple-200">
  
  <!-- ä¸ŠåŠéƒ¨ Logo + é¸å–® -->
  <div>
    <!-- Logo & æ¼¢å ¡é¸å–®æŒ‰éˆ• -->
    <div class="flex items-center justify-between mb-6">
      <a href="{% url 'home:home' %}" class="flex items-center space-x-2">
        <img src="{% static 'images/logo.png' %}" alt="PicTrace Logo" class="rounded-full" style="width: 40px; height: 40px" />
        <span class="text-2xl font-semibold">PicTrace</span>
      </a>
    </div>

    <!-- å°èˆªé¸å–® -->
    <nav>
      <ul class="space-y-4">
        <li><a href="/" class="block px-4 py-2 rounded-lg hover:bg-gray-700">ğŸ  é¦–é </a></li>
        <li><a href="/features" class="block px-4 py-2 rounded-lg hover:bg-gray-700">âš™ï¸ åŠŸèƒ½</a></li>
        <li><a href="/contact" class="block px-4 py-2 rounded-lg hover:bg-gray-700">ğŸ“ è¯çµ¡æˆ‘å€‘</a></li>
      </ul>
    </nav>
  </div>

  <!-- ä¸‹åŠéƒ¨: ç™¼å¸ƒè²¼æ–‡æŒ‰éˆ• & ç”¨æˆ¶è³‡è¨Š -->
  <div class="flex flex-col space-y-4">
    {% if user.is_authenticated %}
    <!-- ç™¼å¸ƒè²¼æ–‡æŒ‰éˆ• -->
    <button @click="isPostModalOpen = true" class="w-full px-4 py-3 text-white bg-blue-500 rounded-lg hover:bg-blue-600">
      âœï¸ ç™¼å¸ƒè²¼æ–‡
    </button>

    <!-- User Avatar + Dropdown (ä½¿ç”¨ Alpine.js æ§åˆ¶é¡¯ç¤º) -->
    <div class="relative" x-data="{ open: false }">
      <!-- é ­åƒæŒ‰éˆ• -->
      <button @click="open = !open" class="flex items-center space-x-2 focus:outline-none">
        {% if user.profile.avatar %}
          <img src="{{ user.profile.avatar }}" alt="User Avatar" class="w-10 h-10 rounded-full" />
        {% else %}
          <img src="{% static 'images/user-avatar.png' %}" alt="User Avatar" class="w-10 h-10 rounded-full" />
        {% endif %}
        <span class="text-white">{{ user.username }}</span>
      </button>

      <!-- ä¸‹æ‹‰é¸å–® -->
      <div x-show="open" @click.away="open = false"
           class="absolute left-0 w-48 mb-2 text-black bg-white rounded-lg shadow-lg bottom-full">
        <a href="{% url 'users:profile' %}" class="block px-4 py-2 hover:bg-gray-200">ğŸ‘¤ å€‹äººè³‡æ–™</a>
        <form action="{% url 'users:logout' %}" method="POST">
          {% csrf_token %}
          <button type="submit" class="block w-full px-4 py-2 text-left hover:bg-gray-200">ğŸšª ç™»å‡º</button>
        </form>
      </div>
    </div>

    {% else %}
    <!-- ç™»å…¥æŒ‰éˆ• -->
    <a href="{% url 'users:login' %}" class="w-full px-4 py-3 text-center text-blue-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-200">
      ğŸ”‘ ç™»å…¥
    </a>
    {% endif %}
  </div>
</aside>
